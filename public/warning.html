<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Rainfall Warnings - Delhi Waterlogging</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header>
        <div class="logo">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c5/Emblem_of_India.svg/200px-Emblem_of_India.svg.png"
                alt="Emblem of India">
            <div>
                <h1>Government of NCT of Delhi</h1>
                <p style="margin:0; font-size: 0.8rem;">Monsoon Alert System</p>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="guidance.html">Guidance</a></li>
            </ul>
        </nav>
    </header>

    <div class="container" id="warnings-container">
        <h1>Rainfall & Waterlogging Alerts</h1>
        <p>Predicted risk based on meteorological simulation for demonstration purposes.</p>

        <div id="warnings-list">
            <!-- Warnings will be loaded here -->
        </div>

        <div class="card" style="margin-top: 2rem;">
            <h3>Understanding Alert Levels</h3>
            <p><span style="background:red; color:white; padding: 2px 5px;">High Risk:</span> Heavy rainfall (>65mm)
                expected. High probability of waterlogging in underpasses and low-lying areas.</p>
            <p><span style="background:orange; color:white; padding: 2px 5px;">Medium Risk:</span> Moderate rainfall
                (15-65mm) expected. Possible traffic disruptions.</p>
            <p><span style="background:green; color:white; padding: 2px 5px;">Low Risk:</span> Light rainfall (<15mm)
                    expected. Normal conditions.</p>
        </div>
    </div>

    <script>
        async function loadWarnings() {
            const res = await fetch('/api/rainfall-warnings');
            const data = await res.json();
            const list = document.getElementById('warnings-list');
            list.innerHTML = data.map(w => `
                <div class="card" style="border-left: 10px solid ${w.risk === 'High' ? 'red' : 'orange'};">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h2>${w.date}</h2>
                        <span class="btn" style="background:${w.risk === 'High' ? 'red' : 'orange'}; color:white;">${w.risk} RISK</span>
                    </div>
                    <p><strong>Affected Areas:</strong> ${w.areas.join(', ')}</p>
                    <p><strong>Safety Advice:</strong> ${w.advice}</p>
                </div>
            `).join('');
        }
        loadWarnings();
    </script>
</body>

</html>